{"ast":null,"code":"import _objectSpread from\"/Users/chenyuda/Documents/top-interview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/chenyuda/Documents/top-interview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useCallback,memo,useState}from'react';import deleteIcon from'../images/deleteIcon.svg';import searchIcon from'../images/searchIcon.svg';import'./History.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default/*#__PURE__*/memo(function History(_ref){var handleSearch=_ref.handleSearch,result=_ref.result;console.log('history render');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),hisotry=_useState2[0],setHisotry=_useState2[1];var handleDeleteItem=function handleDeleteItem(key){localStorage.removeItem(key);setHisotry(allStorage());};var allStorage=useCallback(function(){var values=[],keys=Object.keys(localStorage),i=keys.length;while(i--){values.push(_objectSpread(_objectSpread({},JSON.parse(localStorage.getItem(keys[i]))),{},{key:keys[i]}));}values.sort(function(a,b){var a_timeStamp=a.key.split('_')[1];var b_timeStamp=b.key.split('_')[1];return b_timeStamp-a_timeStamp;});return values;},[]);useEffect(function(){setHisotry(allStorage());},[allStorage,result]);return/*#__PURE__*/_jsxs(\"div\",{className:\"history-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:\"Search History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"history-items\",children:hisotry.map(function(_ref2,index){var city=_ref2.city,country=_ref2.country,dateTime=_ref2.dateTime,key=_ref2.key;var time=dateTime.split(' ')[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"item-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"item-index\",children:[index+1,\".\"]}),city&&/*#__PURE__*/_jsxs(\"span\",{children:[city,\",\"]}),/*#__PURE__*/_jsx(\"span\",{children:country})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-controller\",children:[/*#__PURE__*/_jsx(\"span\",{children:time}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleSearch(city,country);},className:\"icon-button\",children:/*#__PURE__*/_jsx(\"img\",{src:searchIcon,alt:\"search\",width:15,className:\"icon-img\"})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleDeleteItem(key);},className:\"icon-button\",children:/*#__PURE__*/_jsx(\"img\",{src:deleteIcon,alt:\"delete\",width:15,className:\"icon-img\"})})]})]},key);})})]});});","map":{"version":3,"sources":["/Users/chenyuda/Documents/top-interview/src/components/History.jsx"],"names":["React","useEffect","useCallback","memo","useState","deleteIcon","searchIcon","History","handleSearch","result","console","log","hisotry","setHisotry","handleDeleteItem","key","localStorage","removeItem","allStorage","values","keys","Object","i","length","push","JSON","parse","getItem","sort","a","b","a_timeStamp","split","b_timeStamp","map","index","city","country","dateTime","time"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, memo, useState } from 'react'\nimport deleteIcon from '../images/deleteIcon.svg'\nimport searchIcon from '../images/searchIcon.svg'\n\nimport './History.css'\nexport default memo(function History({ handleSearch, result }) {\n    console.log('history render')\n    const [hisotry, setHisotry] = useState([])\n\n    const handleDeleteItem = (key) => {\n        localStorage.removeItem(key)\n        setHisotry(allStorage())\n    }\n\n\n    const allStorage = useCallback(() => {\n        let values = [],\n            keys = Object.keys(localStorage),\n            i = keys.length;\n        while (i--) {\n            values.push({ ...JSON.parse(localStorage.getItem(keys[i])), key: keys[i] });\n        }\n\n        values.sort((a, b) => {\n            const a_timeStamp = a.key.split('_')[1]\n            const b_timeStamp = b.key.split('_')[1]\n            return b_timeStamp - a_timeStamp\n        })\n        return values;\n    }, [])\n\n    useEffect(() => {\n        setHisotry(allStorage())\n    }, [allStorage, result])\n\n\n    return (\n        <div className='history-container'>\n            <h3 className='title'>\n                Search History\n            </h3>\n            <div className='history-items'>\n                {hisotry.map(({ city, country, dateTime, key }, index) => {\n\n                    const time = dateTime.split(' ')[1]\n                    return <div key={key} className='item-box'>\n\n                        <div className='left-info'>\n                            <span className='item-index'>{index + 1}.</span>\n                            {city && <span>{city},</span>}\n                            <span>{country}</span>\n                        </div>\n                        <div className='right-controller'>\n\n                            <span>{time}</span>\n                            <div onClick={() => handleSearch(city, country)} className='icon-button' >\n                                <img src={searchIcon} alt='search' width={15} className='icon-img' />\n                            </div>\n                            <div onClick={() => handleDeleteItem(key)} className='icon-button'>\n                                <img src={deleteIcon} alt='delete' width={15} className='icon-img' />\n\n                            </div>\n                        </div>\n                    </div>\n                })}\n            </div>\n        </div>\n    )\n})\n"]},"metadata":{},"sourceType":"module"}