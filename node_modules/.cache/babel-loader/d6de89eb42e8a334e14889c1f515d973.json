{"ast":null,"code":"var _jsxFileName = \"/Users/chenyuda/Documents/top-interview/src/components/History.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useCallback, memo, useState } from 'react';\nimport deleteIcon from '../images/deleteIcon.svg';\nimport searchIcon from '../images/searchIcon.svg';\nimport './History.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _c2 = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(function History(_ref) {\n  _s();\n\n  let {\n    handleSearch,\n    result\n  } = _ref;\n  console.log('history render');\n  const [hisotry, setHisotry] = useState([]);\n\n  const handleDeleteItem = key => {\n    localStorage.removeItem(key);\n    setHisotry(allStorage());\n  };\n\n  const allStorage = useCallback(() => {\n    let values = [],\n        keys = Object.keys(localStorage),\n        i = keys.length;\n\n    while (i--) {\n      values.push({ ...JSON.parse(localStorage.getItem(keys[i])),\n        key: keys[i]\n      });\n    }\n\n    values.sort((a, b) => {\n      const a_timeStamp = a.key.split('_')[1];\n      const b_timeStamp = b.key.split('_')[1];\n      return b_timeStamp - a_timeStamp;\n    });\n    console.log('values', values);\n    return values;\n  }, []);\n  useEffect(() => {\n    setHisotry(allStorage());\n  }, [allStorage, result]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"title\",\n      children: \"Search History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-items\",\n      children: hisotry.map((_ref2, index) => {\n        let {\n          city,\n          country,\n          dateTime,\n          key\n        } = _ref2;\n        const time = dateTime.split(' ')[1];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"left-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"item-index\",\n              children: [index + 1, \".\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 29\n            }, this), city && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [city, \",\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 38\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: country\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-controller\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: time\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => handleSearch(city, country),\n              className: \"icon-button\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: searchIcon,\n                alt: \"search\",\n                width: 15,\n                className: \"icon-img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => handleDeleteItem(key),\n              className: \"icon-button\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: deleteIcon,\n                alt: \"delete\",\n                width: 15,\n                className: \"icon-img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}, \"WLDaxydp9r1hqP/cLQ5oZp8bvSg=\")), \"WLDaxydp9r1hqP/cLQ5oZp8bvSg=\");\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/chenyuda/Documents/top-interview/src/components/History.jsx"],"names":["React","useEffect","useCallback","memo","useState","deleteIcon","searchIcon","History","handleSearch","result","console","log","hisotry","setHisotry","handleDeleteItem","key","localStorage","removeItem","allStorage","values","keys","Object","i","length","push","JSON","parse","getItem","sort","a","b","a_timeStamp","split","b_timeStamp","map","index","city","country","dateTime","time"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, memo, useState } from 'react'\nimport deleteIcon from '../images/deleteIcon.svg'\nimport searchIcon from '../images/searchIcon.svg'\n\nimport './History.css'\nexport default memo(function History({ handleSearch, result }) {\n    console.log('history render')\n    const [hisotry, setHisotry] = useState([])\n\n    const handleDeleteItem = (key) => {\n        localStorage.removeItem(key)\n        setHisotry(allStorage())\n    }\n\n\n    const allStorage = useCallback(() => {\n        let values = [],\n            keys = Object.keys(localStorage),\n            i = keys.length;\n        while (i--) {\n            values.push({ ...JSON.parse(localStorage.getItem(keys[i])), key: keys[i] });\n        }\n\n        values.sort((a, b) => {\n            const a_timeStamp = a.key.split('_')[1]\n            const b_timeStamp = b.key.split('_')[1]\n            return b_timeStamp - a_timeStamp\n        })\n        console.log('values', values)\n        return values;\n    }, [])\n\n    useEffect(() => {\n        setHisotry(allStorage())\n    }, [allStorage, result])\n\n\n    return (\n        <div className='history-container'>\n            <h3 className='title'>\n                Search History\n            </h3>\n            <div className='history-items'>\n                {hisotry.map(({ city, country, dateTime, key }, index) => {\n\n                    const time = dateTime.split(' ')[1]\n                    return <div key={key} className='item-box'>\n\n                        <div className='left-info'>\n                            <span className='item-index'>{index + 1}.</span>\n                            {city && <span>{city},</span>}\n                            <span>{country}</span>\n                        </div>\n                        <div className='right-controller'>\n\n                            <span>{time}</span>\n                            <div onClick={() => handleSearch(city, country)} className='icon-button' >\n                                <img src={searchIcon} alt='search' width={15} className='icon-img' />\n                            </div>\n                            <div onClick={() => handleDeleteItem(key)} className='icon-button'>\n                                <img src={deleteIcon} alt='delete' width={15} className='icon-img' />\n\n                            </div>\n                        </div>\n                    </div>\n                })}\n            </div>\n        </div>\n    )\n})\n"]},"metadata":{},"sourceType":"module"}