{"ast":null,"code":"import _objectSpread from\"/Users/chenyuda/Documents/top-interview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/chenyuda/Documents/top-interview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useCallback,memo,useState}from'react';import deleteIcon from'../images/deleteIcon.svg';import searchIcon from'../images/searchIcon.svg';import'./History.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default/*#__PURE__*/memo(function History(_ref){var handleSearch=_ref.handleSearch,result=_ref.result;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),hisotry=_useState2[0],setHisotry=_useState2[1];var handleDeleteItem=function handleDeleteItem(key){localStorage.removeItem(key);setHisotry(allStorage());};var allStorage=useCallback(function(){console.log('storage call');var values=[],keys=Object.keys(localStorage),i=keys.length;while(i--){values.push(_objectSpread(_objectSpread({},JSON.parse(localStorage.getItem(keys[i]))),{},{key:keys[i]}));}return values;},[]);console.log('allStorage: ',allStorage());useEffect(function(){setHisotry(allStorage());},[allStorage,result]);return/*#__PURE__*/_jsxs(\"div\",{className:\"history-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:\"Search History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"history-items\",children:hisotry.map(function(_ref2,index){var city=_ref2.city,country=_ref2.country,dateTime=_ref2.dateTime,key=_ref2.key;var time=dateTime.split(' ')[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"item-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"item-index\",children:[index+1,\".\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[city,\",\"]}),/*#__PURE__*/_jsx(\"span\",{children:country})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-controller\",children:[/*#__PURE__*/_jsx(\"span\",{children:time}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleSearch(city,country);},className:\"icon-button\",children:/*#__PURE__*/_jsx(\"img\",{src:searchIcon,alt:\"search\",width:15,className:\"icon-img\"})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleDeleteItem(key);},className:\"icon-button\",children:/*#__PURE__*/_jsx(\"img\",{src:deleteIcon,alt:\"delete\",width:15,className:\"icon-img\"})})]})]},key);})})]});});","map":{"version":3,"sources":["/Users/chenyuda/Documents/top-interview/src/components/History.jsx"],"names":["React","useEffect","useCallback","memo","useState","deleteIcon","searchIcon","History","handleSearch","result","hisotry","setHisotry","handleDeleteItem","key","localStorage","removeItem","allStorage","console","log","values","keys","Object","i","length","push","JSON","parse","getItem","map","index","city","country","dateTime","time","split"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, memo, useState } from 'react'\nimport deleteIcon from '../images/deleteIcon.svg'\nimport searchIcon from '../images/searchIcon.svg'\n\nimport './History.css'\nexport default memo(function History({ handleSearch, result }) {\n    const [hisotry, setHisotry] = useState([])\n\n    const handleDeleteItem = (key) => {\n        localStorage.removeItem(key)\n        setHisotry(allStorage())\n    }\n\n\n    const allStorage = useCallback(() => {\n        console.log('storage call')\n        let values = [],\n            keys = Object.keys(localStorage),\n            i = keys.length;\n        while (i--) {\n            values.push({ ...JSON.parse(localStorage.getItem(keys[i])), key: keys[i] });\n        }\n        return values;\n    }, [])\n    console.log('allStorage: ', allStorage())\n\n    useEffect(() => {\n        setHisotry(allStorage())\n    }, [allStorage, result])\n\n    return (\n        <div className='history-container'>\n            <h3 className='title'>\n                Search History\n            </h3>\n            <div className='history-items'>\n                {hisotry.map(({ city, country, dateTime, key }, index) => {\n\n                    const time = dateTime.split(' ')[1]\n                    return <div key={key} className='item-box'>\n\n                        <div className='left-info'>\n                            <span className='item-index'>{index + 1}.</span>\n                            <span>{city},</span>\n                            <span>{country}</span>\n                        </div>\n                        <div className='right-controller'>\n\n                            <span>{time}</span>\n                            <div onClick={() => handleSearch(city, country)} className='icon-button' >\n                                <img src={searchIcon} alt='search' width={15} className='icon-img' />\n                            </div>\n                            <div onClick={() => handleDeleteItem(key)} className='icon-button'>\n                                <img src={deleteIcon} alt='delete' width={15} className='icon-img' />\n\n                            </div>\n                        </div>\n                    </div>\n                })}\n            </div>\n        </div>\n    )\n})\n"]},"metadata":{},"sourceType":"module"}